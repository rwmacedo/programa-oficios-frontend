<div class="container-fluid bg-white">
  <div class="row justify-content-center">
    <div class="col-md-10">

      <div class="content-box p-4 shadow-sm bg-white rounded">
        <div class="card-header text-center pb-4">
          <h2 class="text-dark text-center mb-4">{{ oficio.id ? 'Editar Ofício' : 'Novo Ofício' }}</h2>
        </div>
        <div class="card-body">
          <form #oficioForm="ngForm" (ngSubmit)="saveOficio()" class="row g-3">
            <!-- Número -->
            <div class="form-group col-md-6">
              <label for="numero" class="form-label text-dark">Número</label>
              <input 
                type="text" 
                id="numero" 
                class="form-control" 
                [(ngModel)]="oficio.numero" 
                name="numero" 
                required 
                minlength="4" 
                maxlength="4" 
                #numero="ngModel">
              
              <div *ngIf="numero.invalid && numero.touched" class="text-danger error-message">
                <small *ngIf="numero.errors?.['required']" >O número é obrigatório.</small>
                <small *ngIf="numero.errors?.['minlength'] || numero.errors?.['maxlength']" >O número deve ter 4 dígitos.</small>
              </div>
            </div>

            <!-- Ano -->
            <div class="form-group col-md-6">
              <label for="ano" class="form-label text-dark">Ano</label>
              <input 
                type="number" 
                id="ano" 
                class="form-control" 
                [(ngModel)]="oficio.ano" 
                name="ano" 
                required 
                min="1990" 
                max="9999"
                #ano="ngModel">
              <div *ngIf="ano.invalid && ano.touched  " class="text-danger error-message">
                <small *ngIf="ano.errors?.['required']">O ano é obrigatório.</small>
                <small *ngIf="ano.errors?.['min'] || ano.errors?.['max']">O ano deve ter 4 dígitos.</small>
              </div>
            </div>

            <!-- Unidade -->
            <div class="form-group col-md-6">
              <label for="unidade" class="form-label text-dark">Unidade</label>
              <input 
                type="text" 
                id="unidade" 
                class="form-control" 
                [(ngModel)]="oficio.unidade" 
                name="unidade" 
                required 
                minlength="4" 
                maxlength="4" 
                #unidade="ngModel">
              <div *ngIf="unidade.invalid && unidade.touched " class="text-danger error-message">
                <small *ngIf="unidade.errors?.['required']">A unidade é obrigatória.</small>
                <small *ngIf="unidade.errors?.['minlength'] || unidade.errors?.['maxlength']">A unidade deve ter 4 dígitos.</small>
              </div>
            </div>

            <!-- Data -->
            <div class="form-group col-md-6">
              <label for="data" class="form-label text-dark">Data</label>
              <input 
                type="date" 
                id="data" 
                class="form-control" 
                [(ngModel)]="oficio.data" 
                name="data" 
                required 
                #data="ngModel">
              <div *ngIf="data.invalid && data.touched" class="text-danger error-message">
                <small *ngIf="data.errors?.['required']">A data é obrigatória.</small>
              </div>
            </div>

            <!-- Escolher Arquivo -->
            <div class="form-group col-md-12">
             <label for="file" class="form-label text-dark">Escolher Arquivo (apenas PDF):</label>
             <input type="file" accept="application/pdf" class="form-control" (change)="onFileSelected($event)          ">
             <div *ngIf="fileError" class="text-danger">{{ fileError }}</div>
           </div>
            <!-- Botões -->
            <div class="button-group col-md-12 d-flex justify-content-start">
              <button 
                type="submit" 
                
                [disabled]="oficioForm.invalid">Salvar</button>
              <button 
                type="button" 
                (click)="goBack()" 
                class="btn botao_voltar ms-2">Voltar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
